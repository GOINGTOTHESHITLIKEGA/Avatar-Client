<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cosmic Launcher — Cosmic</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI, Roboto, "Helvetica Neue", Arial;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(40,44,52,0.25), transparent),
              linear-gradient(180deg,#06070a,#0b0d13);
  color:#c9d1d9;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:30px;
}

/* launcher */
.launcher {
  width: 760px;
  max-width:calc(100% - 40px);
  border-radius:14px;
  background: linear-gradient(180deg,#0f1418 0%, #12161a 100%);
  box-shadow: 0 30px 80px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
  overflow:hidden;
  transform: translateY(20px);
  opacity:0;
  animation: floatIn 450ms cubic-bezier(.2,.9,.3,1) forwards;
}
@keyframes floatIn { to { transform: translateY(0); opacity:1; } }

/* header */
.header {
  display:flex;
  align-items:center;
  gap:16px;
  padding:18px 22px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  border-bottom: 1px solid rgba(255,255,255,0.03);
}
.logo {
  width:46px; height:46px; border-radius:10px;
  background: linear-gradient(135deg,#238636,#2ea043);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;color:white;box-shadow:0 6px 24px rgba(46,160,67,0.12);
}
.title {
  font-weight:700; letter-spacing:0.2px; font-size:18px;
}
.subtitle {
  color:#8b949e; font-size:12px; margin-top:4px;
}
.header-right { margin-left:auto; display:flex; gap:10px; align-items:center; }

/* body */
.body { display:grid; grid-template-columns: 320px 1fr; gap:20px; padding:22px; }
.sidebar {
  background: linear-gradient(180deg, rgba(255,255,255,0.015), transparent);
  border-radius:10px; padding:14px; min-height:240px;
  display:flex; flex-direction:column; gap:12px;
}
.sidebar h3 { margin:0; color:#9fb7ff; font-weight:600; font-size:13px; }
.version-box {
  background: linear-gradient(180deg,#0d1117,#0c0f12);
  border-radius:8px; padding:10px; border:1px solid rgba(255,255,255,0.02);
}
select, input[type=file] {
  width:100%; padding:10px; border-radius:8px; background:#0b0d11; border:1px solid rgba(255,255,255,0.03);
  color:inherit; outline:none;
}
.main {
  padding:14px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  min-height:240px; display:flex; flex-direction:column;
}
.tabs { display:flex; gap:8px; margin-bottom:12px; }
.tab {
  padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600; font-size:13px;
  color:#aebecd; background:transparent; border:1px solid transparent;
  transition: all 160ms ease;
}
.tab:hover { transform:translateY(-3px); }
.tab.active { background: linear-gradient(90deg, rgba(88,166,255,0.12), rgba(88,166,255,0.06)); color:#58a6ff; border:1px solid rgba(88,166,255,0.08); box-shadow:0 6px 18px rgba(8,12,20,0.4); }
.card { background:#0d1116; border-radius:10px; padding:14px; margin-bottom:12px; border:1px solid rgba(255,255,255,0.02); box-shadow: 0 8px 24px rgba(2,6,23,0.45); }
.launch-row { display:flex; gap:12px; align-items:center; margin-top:auto; }
.launch-btn {
  flex:1; padding:14px 18px; border-radius:10px; border:none; font-weight:700; cursor:pointer;
  background: linear-gradient(90deg,#238636,#2ea043); color:white; box-shadow: 0 8px 24px rgba(46,160,67,0.14);
  position:relative; overflow:hidden; transition:transform 180ms ease;
}
.launch-btn:hover { transform:translateY(-4px); }
.launch-btn.loading::after {
  content:""; position:absolute; left:-40%; top:0; width:40%; height:100%; background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); animation: sweep 900ms linear infinite;
}
@keyframes sweep { to { left:140%; } }
.small-btn { padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:#9fb7ff; cursor:pointer; }
.error { color:#ff6b6b; margin-top:8px; font-weight:600; text-align:center; }
.muted { color:#8b949e; font-size:13px; }
.center { text-align:center; }
.spacer { height:8px; }
@media (max-width:820px){ .body{ grid-template-columns: 1fr; } }
</style>
</head>
<body>
<div class="launcher">
  <div class="header">
    <div class="logo">C</div>
    <div>
      <div class="title">Cosmic Launcher</div>
      <div class="subtitle" id="headerSubtitle">Cosmic</div>
    </div>
    <div class="header-right">
      <button class="small-btn" id="importPresetBtn" title="Import preset">Import</button>
      <button class="small-btn" id="exportPresetBtn" title="Export settings">Export</button>
    </div>
  </div>

  <div class="body">
    <!-- left -->
    <div class="sidebar">
      <h3>Play Controls</h3>
      <div class="version-box card" style="padding:12px;">
        <label class="muted" for="versionSelect">Minecraft Version</label>
        <select id="versionSelect">
          <option value="">— Select —</option>
          <option value="1.5.2">1.5.2</option>
          <option value="1.7.3">1.7.3</option>
          <option value="1.8.8">1.8.8</option>
          <option value="1.12.2">1.12.2</option>
        </select>
        <div class="spacer"></div>
        <label class="muted" for="fileInput">Upload HTML Client</label>
        <input type="file" id="fileInput" accept=".html,.htm" />
        <div id="fileName" class="muted center" style="margin-top:8px;">No file chosen</div>
      </div>
      <div style="margin-top:auto;">
        <div class="muted" style="font-size:12px; text-align:center;">Launcher v1 • Local only</div>
      </div>
    </div>

    <!-- right -->
    <div class="main">
      <div class="tabs" role="tablist">
        <div class="tab active" data-tab="home">Home</div>
        <div class="tab" data-tab="client">Clients</div>
        <div class="tab" data-tab="mods">Mods</div>
        <div class="tab" data-tab="settings">Settings</div>
      </div>

      <div id="contentArea" style="flex:1; overflow:auto;">
        <!-- Home -->
        <div id="homeTab" class="tabContent">
          <div class="card center muted">Select a version, upload a client HTML, or pick a ready client in "Clients".</div>
          <div class="card">
            <div class="launch-row">
              <button class="launch-btn" id="launchBtn">Launch</button>
              <button class="small-btn" id="viewModsBtn">View Mods</button>
            </div>
            <div id="errorArea" class="error" style="display:none"></div>
          </div>
        </div>

        <!-- Clients -->
        <div id="clientTab" class="tabContent" style="display:none;">
          <div class="card">
            <div class="small-btn" onclick="window.open('https://resent4-0.vercel.app/','_blank')">Resent</div>
            <div class="small-btn" onclick="window.open('https://starlike.zumbiepig.dev/','_blank')">Starlike</div>
            <div class="small-btn" onclick="window.open('https://eaglerhackedclients.vercel.app/PiClient-v1%20(1).1-20230123-intl.html','_blank')">Pi Client</div>
          </div>
        </div>

        <!-- Mods -->
        <div id="modsTab" class="tabContent" style="display:none;">
          <div class="card center muted">Coming Soon</div>
        </div>

        <!-- Settings -->
        <div id="settingsTab" class="tabContent" style="display:none;">
          <div class="card">
            <div style="font-weight:700">Settings</div>
            <div class="muted" style="margin-top:6px">Local options</div>
            <div style="margin-top:12px">
              <label class="muted">Auto-close launcher after launch</label>
              <div style="margin-top:8px">
                <label class="switch">
                  <input type="checkbox" id="autoCloseToggle">
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            <div style="margin-top:12px">
              <label class="muted">Theme</label>
              <select id="themeSelect">
                <option value="blue">Blue</option>
                <option value="purple">Purple</option>
                <option value="green">Green</option>
                <option value="yellow">Yellow</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
/* ===========================
   Cosmic Launcher Script
=========================== */

const $ = s=>document.querySelector(s);
const $$ = s=>Array.from(document.querySelectorAll(s));

function activateTab(name){
  $$('.tab').forEach(t=>t.dataset.tab===name?t.classList.add('active'):t.classList.remove('active'));
  ['home','client','mods','settings'].forEach(k=>{
    const el=document.getElementById(k+'Tab');
    if(el) el.style.display=(k===name)?'block':'none';
  });
}
$$('.tab').forEach(t=>t.addEventListener('click',()=>{activateTab(t.dataset.tab)}));

function applyTheme(theme){
  const subtitle=$('#headerSubtitle');
  switch(theme){
    case 'purple': subtitle.style.color='#ab47bc'; break;
    case 'green': subtitle.style.color='#66bb6a'; break;
    case 'yellow': subtitle.style.color='#ffeb3b'; break;
    default: subtitle.style.color='#2ea043'; break;
  }
  localStorage.setItem('cosmic_theme',theme);
}

document.addEventListener('DOMContentLoaded',()=>{
  activateTab('home');
  const saved=localStorage.getItem('cosmic_theme')||'blue';
  $('#themeSelect').value=saved;
  applyTheme(saved);
  $('#autoCloseToggle').checked=localStorage.getItem('cosmic_auto_close')==='true';
});

$('#themeSelect').addEventListener('change',e=>applyTheme(e.target.value));
$('#autoCloseToggle').addEventListener('change',e=>localStorage.setItem('cosmic_auto_close',e.target.checked?'true':'false'));

$('#fileInput').addEventListener('change',e=>{
  const f=e.target.files[0];
  $('#fileName').textContent=f?`${f.name} (${Math.round(f.size/1024)} KB)`:'No file chosen';
});

$('#viewModsBtn').addEventListener('click',()=>activateTab('mods'));

$('#launchBtn').addEventListener('click',()=>{
  const version=($('#versionSelect')?.value||'').trim();
  const file=$('#fileInput')?.files?.[0];
  const err=$('#errorArea'); if(err){err.style.display='none'; err.textContent='';}

  const map={'1.5.2':'https://eaglercraft.com/mc/1.5.2','1.7.3':'https://eaglercraft.com/mc/b1.7.3','1.8.8':'https://eaglercraft.com/mc/1.8.8','1.12.2':'https://eaglercraft.com/mc/1.12.2'};
  if(map[version]){window.open(map[version],'_blank'); if(localStorage.getItem('cosmic_auto_close')==='true'){setTimeout(()=>window.close(),600);} return;}
  if(!version){err.textContent='Select version.'; err.style.display='block'; return;}
  if(!file){err.textContent='Upload HTML client.'; err.style.display='block'; return;}

  const reader=new FileReader();
  reader.onload=()=>{
    const mods={}; const meta={version,timestamp:Date.now()};
    const injection=`<script>window.EAGLECRAFT_MODS=${JSON.stringify(mods)};window.EAGLECRAFT_META=${JSON.stringify(meta)};<\\/script>`;
    let html=reader.result;
    if(/<head/i.test(html)) html=html.replace(/<head/i,`<head\n${injection}`);
    else if(/<html/i.test(html)) html=html.replace(/<html/i,`<html\n${injection}`);
    else html=injection+html;
    const blob=new Blob([html],{type:'text/html'});
    window.open(URL.createObjectURL(blob),'_blank');
    if(localStorage.getItem('cosmic_auto_close')==='true'){setTimeout(()=>window.close(),600);}
  };
  reader.readAsText(file);
});

$('#exportPresetBtn').addEventListener('click',()=>{
  const data={theme:$('#themeSelect').value,autoClose:$('#autoCloseToggle').checked};
  const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='cosmic_settings.json'; a.click(); a.remove();
});
$('#importPresetBtn').addEventListener('click',()=>{
  const input=document.createElement('input'); input.type='file'; input.accept='application/json';
  input.addEventListener('change',()=>{const f=input.files[0]; if(!f)return;
    const r=new FileReader(); r.onload=()=>{try{const obj=JSON.parse(r.result); if(obj.theme){$('#themeSelect').value=obj.theme; applyTheme(obj.theme);} if(obj.autoClose!==undefined){$('#autoCloseToggle').checked=!!obj.autoClose; localStorage.setItem('cosmic_auto_close',obj.autoClose?'true':'false');}}catch{alert('Invalid file');}};
    r.readAsText(f);
  }); input.click();
});
</script>
</body>
</html>
